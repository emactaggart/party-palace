(ns party-palace.data
  (:require
   [clojure.data.json :as json]
   [clojure.java.io :as io]
   [environ.core :refer [env]]
   [party-palace.util :as util]
   ))

(def data-get-all-lights
  {"lights"
   {"1"
    {"state"
     {"ct" 299,
      "alert" "none",
      "colormode" "hs",
      "hue" 56100,
      "xy" [0.4149 0.1776],
      "on" true,
      "effect" "none",
      "bri" 254,
      "reachable" true,
      "sat" 254},
     "type" "Extended color light",
     "name" "Hue color lamp 1",
     "modelid" "LCT007",
     "manufacturername" "Philips",
     "uniqueid" "00:17:88:01:10:54:2a:9c-0b",
     "swversion" "66014919",
     "pointsymbol"
     {"1" "none",
      "2" "none",
      "3" "none",
      "4" "none",
      "5" "none",
      "6" "none",
      "7" "none",
      "8" "none"}},
    "2"
    {"state"
     {"ct" 299,
      "alert" "select",
      "colormode" "hs",
      "hue" 55000,
      "xy" [0.4152 0.5134],
      "on" true,
      "effect" "colorloop",
      "bri" 254,
      "reachable" false,
      "sat" 254},
     "type" "Extended color light",
     "name" "Hue color lamp 2",
     "modelid" "LCT007",
     "manufacturername" "Philips",
     "uniqueid" "00:17:88:01:10:54:2c:ac-0b",
     "swversion" "66014919",
     "pointsymbol"
     {"1" "none",
      "2" "none",
      "3" "none",
      "4" "none",
      "5" "none",
      "6" "none",
      "7" "none",
      "8" "none"}},
    "3"
    {"state"
     {"ct" 276,
      "alert" "none",
      "colormode" "hs",
      "hue" 56100,
      "xy" [0.4 0.2639],
      "on" true,
      "effect" "none",
      "bri" 254,
      "reachable" true,
      "sat" 144},
     "type" "Extended color light",
     "name" "Hue color lamp 3",
     "modelid" "LCT007",
     "manufacturername" "Philips",
     "uniqueid" "00:17:88:01:10:54:3c:3d-0b",
     "swversion" "66014919",
     "pointsymbol"
     {"1" "none",
      "2" "none",
      "3" "none",
      "4" "none",
      "5" "none",
      "6" "none",
      "7" "none",
      "8" "none"}},
    "4"
    {"state"
     {"ct" 299,
      "alert" "none",
      "colormode" "hs",
      "hue" 56100,
      "xy" [0.4149 0.1776],
      "on" true,
      "effect" "none",
      "bri" 254,
      "reachable" true,
      "sat" 254},
     "type" "Extended color light",
     "name" "Hue color lamp 4",
     "modelid" "LCT007",
     "manufacturername" "Philips",
     "uniqueid" "00:17:88:01:10:3b:1d:12-0b",
     "swversion" "66014919",
     "pointsymbol"
     {"1" "none",
      "2" "none",
      "3" "none",
      "4" "none",
      "5" "none",
      "6" "none",
      "7" "none",
      "8" "none"}},
    "5"
    {"state"
     {"ct" 370,
      "alert" "none",
      "colormode" "ct",
      "hue" 14910,
      "xy" [0.4596 0.4105],
      "on" true,
      "effect" "none",
      "bri" 254,
      "reachable" true,
      "sat" 144},
     "type" "Extended color light",
     "name" "Hue color lamp 5",
     "modelid" "LCT007",
     "manufacturername" "Philips",
     "uniqueid" "00:17:88:01:10:3b:16:d1-0b",
     "swversion" "66014919",
     "pointsymbol"
     {"1" "none",
      "2" "none",
      "3" "none",
      "4" "none",
      "5" "none",
      "6" "none",
      "7" "none",
      "8" "none"}}},
   "groups" {},
   "config"
   {"mac" "00:17:88:21:30:69",
    "localtime" "2018-03-05T14:10:52",
    "dhcp" true,
    "portalstate"
    {"signedon" false,
     "incoming" false,
     "outgoing" false,
     "communication" "disconnected"},
    "backup" {"status" "idle", "errorcode" 0},
    "replacesbridgeid" nil,
    "zigbeechannel" 20,
    "timezone" "America/Regina",
    "linkbutton" false,
    "factorynew" false,
    "whitelist"
    {"lightbuild"
     {"last use date" "2018-03-05T20:10:52",
      "create date" "2015-11-14T18:54:57",
      "name" "lightbuild"}},
    "bridgeid" "001788FFFE213069",
    "netmask" "255.255.0.0",
    "name" "Jeff",
    "swversion" "01028090",
    "swupdate"
    {"updatestate" 0,
     "checkforupdate" false,
     "devicetypes" {"bridge" false, "lights" [], "sensors" []},
     "url" "",
     "text" "",
     "notify" false},
    "modelid" "BSB002",
    "portalservices" true,
    "ipaddress" "169.254.5.88",
    "UTC" "2018-03-05T20:10:52",
    "apiversion" "1.10.0",
    "proxyport" 0,
    "gateway" "0.0.0.0",
    "proxyaddress" "none",
    "portalconnection" "disconnected"},
   "schedules"
   {"1"
    {"name" "Recurring Party Time",
     "description" "Initech Party Time",
     "command"
     {"address" "/api/lightbuild/lights/2/state",
      "body" {"sat" 254, "effect" "colorloop"},
      "method" "PUT"},
     "localtime" "W127/T08:45:00",
     "time" "W127/T14:45:00",
     "created" "2018-02-09T22:14:10",
     "status" "enabled"},
    "3"
    {"name" "Pink Scorpions",
     "description" "Pink is their favorite color.",
     "command"
     {"address" "/api/lightbuild/lights/2/state",
      "body" {"sat" 254, "hue" 55000},
      "method" "PUT"},
     "localtime" "W127/T08:45:00",
     "time" "W127/T14:45:00",
     "created" "2018-02-21T19:25:36",
     "status" "enabled"}},
   "scenes"
   {"2e1dbbb4a-on-0"
    {"name" "Pencils on 1447523583843",
     "lights" ["1" "2" "3"],
     "active" true},
    "e07a35d7e-on-0"
    {"name" "Greece on 1447523644501",
     "lights" ["1" "2" "3"],
     "active" true},
    "e915785b2-on-0"
    {"name" "Reading on 1447523637207",
     "lights" ["1" "2" "3"],
     "active" true},
    "84fa88aa5-on-0"
    {"name" "Energize on 1447523640287",
     "lights" ["1" "2" "3"],
     "active" true},
    "f2b600f90-on-0"
    {"name" "Kathy on 1447523609555",
     "lights" ["1" "2" "3"],
     "active" true},
    "fd499c3e2-on-0"
    {"name" "Taj on 1447523624242",
     "lights" ["1" "2" "3"],
     "active" true},
    "087f88f52-on-15"
    {"name" "Sunset fon 1447523786346",
     "lights" ["1" "2" "3"],
     "active" true},
    "64b4aa87e-on-0"
    {"name" "Laila on 1447523647697",
     "lights" ["1" "2" "3"],
     "active" true},
    "0f2c67d80-on-0"
    {"name" "Blue rain on 1447523627508",
     "lights" ["1" "2" "3"],
     "active" true},
    "ac637e2f0-on-0"
    {"name" "Relax on 1447523612455",
     "lights" ["1" "2" "3"],
     "active" true},
    "54ae5d997-on-0"
    {"name" "Ski on 1447523622141",
     "lights" ["1" "2" "3"],
     "active" true},
    "797106fb9-on-0"
    {"name" "Hammock on 1447523655297",
     "lights" ["1" "2" "3"],
     "active" true},
    "087f88f52-on-0"
    {"name" "Sunset on 1447523578322",
     "lights" ["1" "2" "3"],
     "active" true},
    "33300ac17-on-0"
    {"name" "Feet up on 1447523630109",
     "lights" ["1" "2" "3"],
     "active" true},
    "2141cb8bd-on-0"
    {"name" "Deep sea on 1447523597653",
     "lights" ["1" "2" "3"],
     "active" true},
    "6b6ca6a0d-on-0"
    {"name" "Beach on 1447523619113",
     "lights" ["1" "2" "3"],
     "active" true},
    "f5d73dbdd-on-0"
    {"name" "Concentrate on 1447523615719",
     "lights" ["1" "2" "3"],
     "active" true},
    "3896c310d-on-0"
    {"name" "Jump! on 1447523634851",
     "lights" ["1" "2" "3"],
     "active" true}},
   "rules" {},
   "sensors"
   {"1"
    {"state" {"daylight" nil, "lastupdated" "none"},
     "config"
     {"on" true,
      "long" "none",
      "lat" "none",
      "sunriseoffset" 30,
      "sunsetoffset" -30},
     "name" "Daylight",
     "type" "Daylight",
     "modelid" "PHDL00",
     "manufacturername" "Philips",
     "swversion" "1.0"}}})

(def data-group-0 {"name" "Group 0",
                   "lights" ["1" "2" "3" "4" "5"],
                   "type" "LightGroup",
                   "action"
                   {"ct" 370,
                    "alert" "none",
                    "colormode" "ct",
                    "hue" 14910,
                    "xy" [0.4596 0.4105],
                    "on" true,
                    "effect" "none",
                    "bri" 254,
                    "sat" 144}})

(def data-get-lights
  {"1"
   {"state"
    {"ct" 299,
     "alert" "none",
     "colormode" "hs",
     "hue" 56100,
     "xy" [0.4149 0.1776],
     "on" true,
     "effect" "none",
     "bri" 254,
     "reachable" true,
     "sat" 254},
    "type" "Extended color light",
    "name" "Hue color lamp 1",
    "modelid" "LCT007",
    "manufacturername" "Philips",
    "uniqueid" "00:17:88:01:10:54:2a:9c-0b",
    "swversion" "66014919",
    "pointsymbol"
    {"1" "none",
     "2" "none",
     "3" "none",
     "4" "none",
     "5" "none",
     "6" "none",
     "7" "none",
     "8" "none"}},
   "2"
   {"state"
    {"ct" 299,
     "alert" "select",
     "colormode" "hs",
     "hue" 55000,
     "xy" [0.4152 0.5134],
     "on" true,
     "effect" "colorloop",
     "bri" 254,
     "reachable" false,
     "sat" 254},
    "type" "Extended color light",
    "name" "Hue color lamp 2",
    "modelid" "LCT007",
    "manufacturername" "Philips",
    "uniqueid" "00:17:88:01:10:54:2c:ac-0b",
    "swversion" "66014919",
    "pointsymbol"
    {"1" "none",
     "2" "none",
     "3" "none",
     "4" "none",
     "5" "none",
     "6" "none",
     "7" "none",
     "8" "none"}},
   "3"
   {"state"
    {"ct" 276,
     "alert" "none",
     "colormode" "hs",
     "hue" 56100,
     "xy" [0.4 0.2639],
     "on" true,
     "effect" "none",
     "bri" 254,
     "reachable" true,
     "sat" 144},
    "type" "Extended color light",
    "name" "Hue color lamp 3",
    "modelid" "LCT007",
    "manufacturername" "Philips",
    "uniqueid" "00:17:88:01:10:54:3c:3d-0b",
    "swversion" "66014919",
    "pointsymbol"
    {"1" "none",
     "2" "none",
     "3" "none",
     "4" "none",
     "5" "none",
     "6" "none",
     "7" "none",
     "8" "none"}},
   "4"
   {"state"
    {"ct" 299,
     "alert" "none",
     "colormode" "hs",
     "hue" 56100,
     "xy" [0.4149 0.1776],
     "on" true,
     "effect" "none",
     "bri" 254,
     "reachable" true,
     "sat" 254},
    "type" "Extended color light",
    "name" "Hue color lamp 4",
    "modelid" "LCT007",
    "manufacturername" "Philips",
    "uniqueid" "00:17:88:01:10:3b:1d:12-0b",
    "swversion" "66014919",
    "pointsymbol"
    {"1" "none",
     "2" "none",
     "3" "none",
     "4" "none",
     "5" "none",
     "6" "none",
     "7" "none",
     "8" "none"}},
   "5"
   {"state"
    {"ct" 370,
     "alert" "none",
     "colormode" "ct",
     "hue" 14910,
     "xy" [0.4596 0.4105],
     "on" true,
     "effect" "none",
     "bri" 254,
     "reachable" true,
     "sat" 144},
    "type" "Extended color light",
    "name" "Hue color lamp 5",
    "modelid" "LCT007",
    "manufacturername" "Philips",
    "uniqueid" "00:17:88:01:10:3b:16:d1-0b",
    "swversion" "66014919",
    "pointsymbol"
    {"1" "none",
     "2" "none",
     "3" "none",
     "4" "none",
     "5" "none",
     "6" "none",
     "7" "none",
     "8" "none"}}})

(def jenkins-file
  (if (env :jenkins-file)
    (io/file (env :jenkins-file))
    nil))

(defn slurp-jobs []
  (->> (util/safe-slurp jenkins-file)
       util/safe-json-read))
